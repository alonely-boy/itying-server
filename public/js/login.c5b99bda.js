(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{2959:function(e,t,r){},"42d2":function(e,t,r){"use strict";var i=r("b73d"),n=r.n(i);n.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var i=r("1d80"),n=r("5899"),o="["+n+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),c=function(e){return function(t){var r=String(i(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(a,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},"603c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIUAAABkCAIAAAAnoGRMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMDowNzoyOSAxNzowODo0M43JPJcAAAgBSURBVHhe7Z1vSFNdHMfvU+uphkgMW2sMkRr2T0JkDBEZNUQkBkVJLyIkehER4auwEIoQX4RE+CJ6JTF6JWEjIqQiYgwJiVpLQi0iJExiLakxIsTq+T7X790zrtVz1e2eq/d8Xtjv7Nyzs53f+f05d+eeFIlEIpFIJBKJRCKRSCQSicTC/MV/rYrT6aytrQ0Gg9XV1ZWVlShms9lUKhWLxUZGRniRpKR4vd62tra+vj6M+8zMzM9fMTs729vbywaSooOJH4lEMMSjo6MccgPs3r2b7VcK4v1VOBw+efIklLF+/Xq+ZIxnz57V19fDUFguNm632+Px4C/YsGFDucrfKg6HA4YLcrlcJpNJp9OvVb59+8bGyxGfzxePxznVDYP48ejRo9OnT69bt45vtGQwvoFA4Pjx45cvX7579y5s9OvXr+zPMFDP8PBwV1fXli1b+L7LC+OuCROwtbW1sbERIZ2Nlww8ZEtLS09PDwYR85o9FQOY7PXr12FS7GlZsGrVql+OwtTU1L179y5dunT06NH8JMXUg5dgy6UBnwM7gBEswgIWxNDQELtcLhw7dgzjcuPGjYsXLyKhwvSvqKhgnaIcOXKE30ylpqaGFYsFgaq/v7/UapgDThXdseOFYN31B4LE3r17WVCU/fv337lzh4WFAL8Exbe3t2/bto0vGWNsbAwedXJyEnYMAy0rK8N0QYTHzNi8eTMvmsf79+8xyeAG3759y5dWAFVVVfDCnGwqGFPWGcblcnV3d09PT/MtDJBIJBCr5mSsNwvttRC8c1NTU0dHRzQaRRNcCe904cIFLFp5xQoDHmxuUPLs2bOHdQZA6oXRgdNg4/8DRgDN+f1+RLVCh7Y4i1yBIJfnkKhgjIxnt7Atg5kbvNDt27f37dsHNcy1ra2tZZ1GETO65UowGORgaCDjYp0BsIZgs98Dg4ABeb1ettE4ceIEr9CAtlhnW3p7ezkYGlj9sc4ADQ0Nf1hPYAWKpUzeIHRg3cDrNCKRCOtsCyYvB0NjoU4jFArN93h9fX3/e78LkZkNNHbu3Mk6e4JVCEdC4+nTp6xbCLCAw4cPY77HYrFz58653W5W/B6EKF1Sl8lkWGdbrly5wsHQ6OzsZF2Jqa+vZ5caWKuyzrZMTExwMDS2b9/OuhJz6tQpdqmBSMM6e1JXV8eR0Hj58iXrSg8CDHtVge8y/57gr9MMURw4cICSxsDAAKXSg9lASSWZTH7+/JkFe5JKpTg5NUxLbxwOhy5L7unpYZ09QVLLkdAw01nV1NSwVw0hKw8L+av5399MZzV/afL48WNKJmJpfdy8eZNS6dHp49WrV9PT0yzYEKfTqfulyOTtVYODg+xYJRqNssJcrGIf4XBYt7+kv7+fkinofn8cHh6mZE+uXr3Kmanh9/tZV3rKysrYq0YgEGCdPXnz5g1HQgW5PytMAaPPjlWQ+BZr+8RCsYS/gils3bqVBRUzMyugW+WMjo7OzMywYC6W0EdLSwsljVgsRskUdLfITLbOQiyhj+bmZkoqY2Nj4+PjLJiC1Md/OBwO3V4Fk40D6HKHVCpFyYaEQiGGUQ3dfT0TKFz6zM7OIt1ihQ3p6uriSKiYv41Md98MmR4rRCDeXzU1NVFSMd9Z6bajI7miJALB+igvL9etvKQ+RIJIvmbNGhYU5dOnT+bfqKiqqqKkYnJqp0OwPnSbwB88ePDjxw8WzEKnD1vbh04fC9qHWCwsZR8icbvdzGlUkGga2SVVdJDR8ROoTwPxVUGItA/dMnBkZCSdTrNgIoW7eN+9e0dJEBbSx+DgICUTgUWuXbuWBXWrKiVBWEgfQoKHz+ejpGJffWBi7tixgwVF+fLli5D9Ax6Ph5KKffWhM46HDx+an+kCXQYh9UHi8Tglc9Hpw775VSgUoqRiEX0I3yAqRh8VFRW7du1iQVE+fvxo5lbEQnRP0GazWUqCEKMPnXEkEglKpiP18S/W0YfL5aKkYtMN7clkkjcoVAQeYzU+Ps4P8fNnLpfjq7aivLy88DE9sc/o5U9jAFbYsCvAXzU0NKxevZoFoc4KWO1UJAH6aGxspKQiUB9Op7Pw17DfPZRuJgI+gS6YC7lNMscyOzKsFDgcjsLNNQJ3yoLq6mp+DhXhyS4w2z6CwWDhcwVzJ7qyYDrILCip2NFf6YKH2McsdPveBFpqHrP1geSKkopYfejOcEJsF24igvXx5MkTSiKYbxAIb5QEYao+ED83btzIgnobUewhg/P1YS/70AUPg8aBqBsOh8+cORONRoeGhiYmJj58+IC2un06i8AKAVxH8c8XxfC1trYGAgGPx4MvjOw2nU5PTk6+fv26ra3t0KFDvE5Rzp8/393dzUIBPp8PllSn4ff7C9fzec6ePbvEIxQOHjx469YtFlQQQmZLdgC5EYqsD1jAwMDApk2bWP4jL168gJJyuRzUBi0Cr9eLWW/wIPfnz59DWywsiubm5vv377OgKN+/fxceP4oJvkwmk+HiqvQkEoklHuGuOyNjBR4AAP/OL1casJ6Px+OdnZ3FOmem8Fg/Ub9RlhB4nkgkcu3atWQy+YdDJRcEAngsFuvo6AiFQkVfssHB5j+nyScQ/JISnhcO3SAUA4SEyspKRGmEB5fLlf+/NPJRGo4bUTSbzSJxQvDH36mpqVGNUv9MhOQNaQU+QHt7u62fHIT3x3y3YNIpkUgkEolEIpFIJBKJRCKRSCQSiUQikUgkEpuhKP8AaRTeZmT8nfIAAAAASUVORK5CYII="},7156:function(e,t,r){var i=r("861d"),n=r("d2bb");e.exports=function(e,t,r){var o,s;return n&&"function"==typeof(o=t.constructor)&&o!==r&&i(s=o.prototype)&&s!==r.prototype&&n(e,s),e}},"73cf":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isLogin?r("div",{staticClass:"container"},[r("div",{staticClass:"content"}),r("div",{staticClass:"btn"},[r("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.login}},[e._v("立即登录")])],1),e._m(0),r("el-form",{ref:"ruleForm",staticClass:"registerForm",attrs:{model:e.registerForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{prop:"userName",label:"用户名"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名同昵称，支持中文，长度为2-10位"},model:{value:e.registerForm.userName,callback:function(t){e.$set(e.registerForm,"userName","string"===typeof t?t.trim():t)},expression:"registerForm.userName"}})],1),r("el-form-item",{attrs:{prop:"password",label:"设置密码"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"密码长度为6-15位","show-password":""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password","string"===typeof t?t.trim():t)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{prop:"password2",label:"确认密码"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"确认密码","show-password":""},model:{value:e.registerForm.password2,callback:function(t){e.$set(e.registerForm,"password2","string"===typeof t?t.trim():t)},expression:"registerForm.password2"}})],1),r("el-form-item",{attrs:{prop:"code",label:"验证码"}},[r("el-input",{staticClass:"code",attrs:{type:"text",id:"code",placeholder:"请输入您的验证码"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}}),r("div",{staticClass:"login-code",on:{click:e.refreshCode}},[r("sIdentify",{attrs:{identifyCode:e.identifyCode}})],1)],1),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{directives:[{name:"preventClick",rawName:"v-preventClick"}],attrs:{type:"primary",disabled:e.judge},on:{click:e.register}},[e._v("注册")]),r("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$refs.ruleForm.resetFields()}}},[e._v("重置")])],1)],1)],1):e._e()},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon"},[i("img",{staticStyle:{borderRadius:"50%"},attrs:{draggable:"false",src:r("603c"),width:"100%",height:"100%s",alt:""}})])}],o=(r("96cf"),r("1da1")),s=r("f8f9"),a={name:"Register",components:{SIdentify:s["a"]},data:function(){var e=this,t=function(t,r,i){if(r===e.registerForm.password)return i();i(new Error("两次输入的密码不一致"))},r=function(t,r,i){if(r===e.identifyCode)return i();i(new Error("验证码错误"))},i=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r,i,n){var o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/register".concat(e.registerForm.userName));case 2:if(o=t.sent,s=o.data,"ok"===s){t.next=8;break}n(new Error("用户名已被注册了")),t.next=9;break;case 8:return t.abrupt("return",n());case 9:case"end":return t.stop()}}),t)})));return function(e,r,i){return t.apply(this,arguments)}}();return{identifyCodes:"1234567890",identifyCode:"",isLogin:!0,judge:!1,registerForm:{userName:"",password:"",password2:"",code:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"用户名长度为2-10个字符",trigger:"blur"},{validator:i,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码长度为6-15个字符",trigger:"blur"}],password2:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:t,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"验证码长度为4个字符",trigger:"blur"},{validator:r,trigger:"blur"}]}}},created:function(){this.refreshCode()},mounted:function(){if(this.identifyCode="",this.makeCode(this.identifyCodes,4),sessionStorage.userInfo){var e=JSON.parse(sessionStorage.userInfo),t=e.userName,r=e.password;this.loginForm.userName=t,this.loginForm.password=r}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var r=0;r<t;r++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},login:function(){this.$router.push("/login")},register:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/register",e.registerForm);case 4:i=t.sent,n=i.data,"ok"===n&&(e.$message.success("注册成功"),sessionStorage.userInfo=JSON.stringify(e.registerForm),e.$router.push("/login"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},c=a,l=(r("7a06"),r("2877")),u=Object(l["a"])(c,i,n,!1,null,"b4bfb72c",null);t["default"]=u.exports},"7a06":function(e,t,r){"use strict";var i=r("2959"),n=r.n(i);n.a},"81d5":function(e,t,r){"use strict";var i=r("7b0b"),n=r("23cb"),o=r("50c4");e.exports=function(e){var t=i(this),r=o(t.length),s=arguments.length,a=n(s>1?arguments[1]:void 0,r),c=s>2?arguments[2]:void 0,l=void 0===c?r:n(c,r);while(l>a)t[a++]=e;return t}},9281:function(e,t,r){},a55b:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"content"}),r("div",{staticClass:"youke"},[r("el-button",{attrs:{size:"mini",type:"warning"},on:{click:e.youke}},[e._v("游客浏览")])],1),r("div",{staticClass:"btn"},[r("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.register}},[e._v("免费注册")])],1),e._m(0),r("el-form",{ref:"ruleForm",staticClass:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[r("el-form-item",{attrs:{prop:"userName"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"输入昵称/用户名"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName","string"===typeof t?t.trim():t)},expression:"loginForm.userName"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"输入密码","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"===typeof t?t.trim():t)},expression:"loginForm.password"}})],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticClass:"code",attrs:{type:"text",id:"code",placeholder:"请输入您的验证码"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}}),r("div",{staticClass:"login-code",on:{click:e.refreshCode}},[r("sIdentify",{attrs:{identifyCode:e.identifyCode}})],1)],1),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{directives:[{name:"preventClick",rawName:"v-preventClick"}],attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),r("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$refs.ruleForm.resetFields()}}},[e._v("重置")])],1)],1)],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon"},[i("img",{staticStyle:{borderRadius:"50%"},attrs:{draggable:"false",src:r("603c"),width:"100%",height:"100%s",alt:""}})])}],o=(r("96cf"),r("1da1")),s=r("f8f9"),a={components:{SIdentify:s["a"]},name:"Login",data:function(){var e=this,t=function(t,r,i){if(r===e.identifyCode)return i();i(new Error("验证码错误"))};return{identifyCodes:"1234567890",identifyCode:"",code:"",loginForm:{userName:"",password:"",code:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:15,message:"用户名长度为2-15个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码长度为6-15个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"验证码长度为4个字符",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){this.refreshCode()},mounted:function(){if(this.identifyCode="",this.makeCode(this.identifyCodes,4),sessionStorage.userInfo){var e=JSON.parse(sessionStorage.userInfo),t=e.userName,r=e.password;this.loginForm.userName=t,this.loginForm.password=r}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var r=0;r<t;r++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},youke:function(){var e=this;localStorage.token?this.$confirm("游客登录将清除所有缓存的登录信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){localStorage.clear(),e.$router.push("/")})).catch((function(){})):this.$router.push("/")},register:function(){this.$router.push("/register")},login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.ruleForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$http.post("/login",e.loginForm);case 5:i=t.sent,n=i.data,localStorage.token=n.token,localStorage.id=n.user._id,localStorage.userAvatar=n.user.avatar,e.$router.push("/"),e.$message.success("登录成功"),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](2);case 16:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},c=a,l=(r("f10d"),r("2877")),u=Object(l["a"])(c,i,n,!1,null,"f9e71f9c",null);t["default"]=u.exports},a9e3:function(e,t,r){"use strict";var i=r("83ab"),n=r("da84"),o=r("94ca"),s=r("6eeb"),a=r("5135"),c=r("c6b6"),l=r("7156"),u=r("c04e"),d=r("d039"),f=r("7c73"),m=r("241c").f,g=r("06cf").f,h=r("9bf2").f,p=r("58a8").trim,v="Number",b=n[v],y=b.prototype,C=c(f(y))==v,w=function(e){var t,r,i,n,o,s,a,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=p(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+l}for(o=l.slice(2),s=o.length,a=0;a<s;a++)if(c=o.charCodeAt(a),c<48||c>n)return NaN;return parseInt(o,i)}return+l};if(o(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var N,A=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof A&&(C?d((function(){y.valueOf.call(r)})):c(r)!=v)?l(new b(w(t)),r,A):w(t)},x=i?m(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)a(b,N=x[k])&&!a(A,N)&&h(A,N,g(b,N));A.prototype=y,y.constructor=A,s(n,v,A)}},b73d:function(e,t,r){},cb29:function(e,t,r){var i=r("23e7"),n=r("81d5"),o=r("44d2");i({target:"Array",proto:!0},{fill:n}),o("fill")},f10d:function(e,t,r){"use strict";var i=r("9281"),n=r.n(i);n.a},f8f9:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"s-canvas"},[r("canvas",{attrs:{id:"s-canvas",width:e.contentWidth,height:e.contentHeight}})])},n=[],o=(r("cb29"),r("a9e3"),{name:"Code",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:30},backgroundColorMin:{type:Number,default:255},backgroundColorMax:{type:Number,default:255},colorMin:{type:Number,default:0},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:255},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:31}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){var r=this.randomNum(e,t),i=this.randomNum(e,t),n=this.randomNum(e,t);return"rgb("+r+","+i+","+n+")"},drawPic:function(){var e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(var r=0;r<this.identifyCode.length;r++)this.drawText(t,this.identifyCode[r],r);this.drawLine(t),this.drawDot(t)},drawText:function(e,t,r){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var i=(r+1)*(this.contentWidth/(this.identifyCode.length+1)),n=this.randomNum(this.fontSizeMax,this.contentHeight-5),o=this.randomNum(-45,45);e.translate(i,n),e.rotate(o*Math.PI/180),e.fillText(t,0,0),e.rotate(-o*Math.PI/180),e.translate(-i,-n)},drawLine:function(e){for(var t=0;t<5;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot:function(e){for(var t=0;t<80;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}}),s=o,a=(r("42d2"),r("2877")),c=Object(a["a"])(s,i,n,!1,null,"204fdad4",null);t["a"]=c.exports}}]);